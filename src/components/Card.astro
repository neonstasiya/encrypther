---
/**
 * Card Component - Clean Rebuild
 * 
 * Simple, centered card component with icon, title, description.
 * Everything is centered both vertically and horizontally.
 * Fully responsive for mobile, tablet, and desktop.
 */

interface Props {
  title?: string;
  description?: string;
  icon?: string;
  iconBg?: 'primary' | 'accent';
  href?: string;
  image?: string;
  imageAlt?: string;
  badge?: string;
  class?: string;
}

const {
  title,
  description,
  icon,
  iconBg = 'primary',
  href,
  image,
  imageAlt = '',
  badge,
  class: className = '',
} = Astro.props;

const CardTag = href ? 'a' : 'div';
const iconBgClass = iconBg === 'primary' ? 'bg-primary/10' : 'bg-accent/10';
const iconColorClass = iconBg === 'primary' ? 'text-primary' : 'text-accent';
---

<CardTag 
  href={href}
  class={`block bg-card border border-border rounded-lg overflow-hidden hover:shadow-xl transition-all duration-300 ${href ? 'cursor-pointer hover:-translate-y-1' : ''} ${className}`}
>
  <!-- Image Section (if provided) -->
  {image && (
    <div class="h-48 w-full overflow-hidden">
      <img 
        src={image} 
        alt={imageAlt}
        class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
        loading="lazy"
      />
    </div>
  )}
  
  <!-- Content Section - Everything Centered -->
  <div class="p-6 flex flex-col items-center justify-center text-center">
    
    <!-- Badge (if provided) -->
    {badge && (
      <span class="inline-block text-xs font-semibold px-3 py-1 rounded-full bg-accent/10 text-accent mb-4">
        {badge}
      </span>
    )}
    
    <!-- Icon Box - Properly Centered -->
    {icon && (
      <div class={`w-16 h-16 ${iconBgClass} rounded-lg flex items-center justify-center mb-5 mx-auto`}>
        <div class={`${iconColorClass} w-8 h-8 flex items-center justify-center`} set:html={icon} />
      </div>
    )}
    
    <!-- Title -->
    {title && (
      <h3 class="text-2xl md:text-3xl font-bold mb-4 text-foreground leading-tight">
        {title}
      </h3>
    )}
    
    <!-- Description -->
    {description && (
      <p class="text-base md:text-lg text-muted-foreground mb-4 leading-relaxed">
        {description}
      </p>
    )}
    
    <!-- Slot for Additional Content -->
    <div class="w-full text-center">
      <slot />
    </div>
  </div>
</CardTag>
